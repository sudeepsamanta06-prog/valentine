<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>For Joshita üíó</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;600;700;800&family=Patrick+Hand&family=Dancing+Script:wght@700&family=Sacramento&display=swap');

/* ========== GLOBAL ENHANCEMENTS ========== */
:root {
    --pink-light: #ffcce6;
    --pink-medium: #ff6fae;
    --pink-dark: #ff3d8b;
    --purple-light: #d8c3ff;
    --purple-medium: #9b5de5;
    --gold: #ffd166;
    --teal: #06d6a0;
    --blue-light: #a8dadc;
}

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    padding: 0;
    font-family: 'Playfair Display', serif;
    min-height: 100vh;
    background: linear-gradient(135deg, 
        #ff9acb 0%, 
        #ffc3a0 25%, 
        #c9b6ff 50%, 
        #a8dadc 75%, 
        #ffd6e0 100%);
    background-size: 400% 400%;
    animation: bgMove 25s ease infinite;
    position: relative;
    overflow: hidden;
    touch-action: manipulation;
}

@keyframes bgMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* ========== MUSIC CONTROLS ========== */
#musicControl {
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, var(--pink-medium), var(--purple-medium));
    border: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    font-size: 1.8em;
    cursor: pointer;
    z-index: 1000;
    box-shadow: 0 8px 25px rgba(255, 105, 180, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    color: white;
}

#musicControl:hover {
    transform: scale(1.15) rotate(15deg);
    box-shadow: 0 12px 35px rgba(255, 105, 180, 0.6);
}

#musicControl.playing {
    animation: musicPulse 1.5s infinite;
    background: linear-gradient(135deg, var(--teal), var(--blue-light));
}

@keyframes musicPulse {
    0%, 100% { transform: scale(1); box-shadow: 0 8px 25px rgba(6, 214, 160, 0.4); }
    50% { transform: scale(1.1); box-shadow: 0 12px 35px rgba(6, 214, 160, 0.6); }
}

/* ========== PAGE CONTAINERS ========== */
.page {
    position: absolute;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    color: white;
    text-align: center;
    padding: 20px;
    transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1), 
                transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 10;
    overflow: hidden;
}

.page.active {
    display: flex;
    opacity: 1;
    transform: translateX(0) scale(1);
}

.page.exit {
    opacity: 0;
    transform: translateX(-50px) scale(0.95);
}

/* ========== PAGE 1: PROPOSAL ========== */
#p1 {
    background: radial-gradient(circle at 30% 30%, rgba(255,154,203,0.9), rgba(201,182,255,0.8));
}

#p1 h1.fancy {
    font-family: 'Sacramento', cursive;
    font-size: 4.5em;
    margin: 0;
    background: linear-gradient(45deg, #ff3d8b, #9b5de5, #06d6a0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 4px 15px rgba(0,0,0,0.1);
    animation: titleFloat 3s ease-in-out infinite;
}

#p1 h2.fancy {
    font-family: 'Dancing Script', cursive;
    font-size: 2.8em;
    margin: 10px 0 40px 0;
    color: white;
    text-shadow: 0 2px 10px rgba(0,0,0,0.2);
}

@keyframes titleFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

/* Button Container */
.button-container {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 25px;
    align-items: center;
    padding: 30px;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 30px;
    backdrop-filter: blur(10px);
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
    min-width: 300px;
}

/* YES Button */
#yesBtn {
    background: linear-gradient(135deg, var(--pink-dark), var(--purple-medium));
    color: white;
    padding: 18px 45px;
    border-radius: 50px;
    border: none;
    font-size: 1.5em;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 10px 30px rgba(255, 61, 139, 0.4);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    z-index: 100;
    animation: yesButtonGlow 2s ease-in-out infinite;
}

#yesBtn:hover {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 15px 40px rgba(255, 61, 139, 0.6);
}

@keyframes yesButtonGlow {
    0%, 100% { box-shadow: 0 10px 30px rgba(255, 61, 139, 0.4); }
    50% { box-shadow: 0 10px 40px rgba(255, 61, 139, 0.7); }
}

/* NO Button - ENHANCED WITH MOVEMENT */
#noBtn {
    background: linear-gradient(135deg, #e0e0e0, #f0f0f0);
    color: #666;
    padding: 12px 30px;
    border-radius: 25px;
    border: 2px solid #ccc;
    font-size: 1.2em;
    cursor: pointer;
    transition: all 0.2s ease;
    position: absolute;
    z-index: 100;
    font-family: 'Patrick Hand', cursive;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    user-select: none;
}

#noBtn:hover {
    background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
}

/* NO Button message container */
#noMsg {
    margin-top: 20px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    color: #333;
    font-weight: bold;
    font-size: 1.1em;
    font-family: 'Patrick Hand', cursive;
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    min-height: 60px;
    min-width: 250px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 3px double var(--pink-medium);
    animation: msgBorderGlow 3s infinite;
    position: relative;
    overflow: hidden;
}

#noMsg::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, #ff6fae, #7c7cff, #ff9f6e, #ff6fae);
    background-size: 400% 400%;
    z-index: -1;
    border-radius: inherit;
    animation: gradientBorder 3s ease infinite;
}

@keyframes msgBorderGlow {
    0%, 100% { border-color: #ff6fae; }
    33% { border-color: #7c7cff; }
    66% { border-color: #ff9f6e; }
}

@keyframes gradientBorder {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

/* ========== PAGE 2: OUR STORY WITH ACHIEVEMENTS - SCROLLABLE ========== */
#p2 {
    justify-content: flex-start;
    padding: 80px 20px 40px;
    overflow-y: auto;
    display: none;
}

#p2.active {
    display: flex;
    opacity: 1;
    transform: translateX(0) scale(1);
}

#p2 .card {
    background: linear-gradient(45deg, #fffaf0, #fff5e6);
    color: #5b4636;
    font-family: 'Patrick Hand', cursive;
    padding: 40px;
    border-radius: 25px;
    width: 90%;
    max-width: 800px;
    box-shadow: 0 20px 50px rgba(139, 69, 19, 0.2);
    border: 8px solid #f5e6d3;
    position: relative;
    margin: 20px 0;
}

#p2 h2 {
    color: #8b4513;
    font-family: 'Playfair Display', serif;
    font-weight: 700;
    font-size: 2.2em;
    margin-bottom: 25px;
}

/* Achievement Badges */
.achievement-badges {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin: 30px 0;
}

.badge {
    background: linear-gradient(135deg, #ffd6e0, #ffcce6);
    padding: 15px;
    border-radius: 20px;
    border: 3px solid #ff6fae;
    min-width: 200px;
    position: relative;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(255, 111, 174, 0.2);
    transition: transform 0.3s ease;
}

.badge:hover {
    transform: translateY(-5px);
}

.badge-icon {
    font-size: 2.5em;
    margin-bottom: 10px;
}

.badge-title {
    font-weight: bold;
    color: #ff3d8b;
    font-size: 1.2em;
    margin-bottom: 5px;
    font-family: 'Playfair Display', serif;
}

.badge-date {
    color: #9b5de5;
    font-weight: bold;
}

/* ========== PAGE 3: PHOTO GALLERY ========== */
img.photo {
    max-width: 85vw;
    max-height: 60vh;
    border-radius: 20px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.4);
    transform: rotate(-2deg);
    background: white;
    padding: 15px;
    border: 5px solid white;
}

/* Enhanced caption */
.caption {
    animation: captionFlow 8s ease-in-out infinite;
    background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,240,245,0.95));
    padding: 20px;
    border-radius: 15px;
    margin: 25px 0;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    font-family: 'Dancing Script', cursive;
    font-size: 1.8em;
    min-height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
}

@keyframes captionFlow {
    0% { color: #ff6fae; transform: translateY(0); }
    33% { color: #7c7cff; transform: translateY(-5px); }
    66% { color: #ff9f6e; transform: translateY(0); }
    100% { color: #ff6fae; transform: translateY(-5px); }
}

/* ========== PAGE 4: REASONS YOU'RE SPECIAL - SCROLLABLE SCRATCH CARDS ========== */
#p4 {
    justify-content: flex-start;
    padding: 80px 20px 40px;
    overflow-y: auto;
    display: none;
}

#p4.active {
    display: flex;
    opacity: 1;
    transform: translateX(0) scale(1);
}

#p4 .card {
    background: linear-gradient(135deg, #fffaf0, #fff5ee);
    padding: 40px 30px;
    border-radius: 25px;
    width: 90%;
    max-width: 800px;
    box-shadow: 0 25px 60px rgba(147, 112, 219, 0.3);
    border: 6px solid #d8bfd8;
    margin: 20px 0;
    min-height: auto;
    max-height: 85vh;
    overflow-y: visible;
}

#p4 h2 {
    font-family: 'Playfair Display', serif;
    font-weight: 800;
    font-size: 2.5em;
    color: #9370db;
    margin-bottom: 10px;
}

.scratch-instructions {
    color: #6a5acd;
    font-size: 1.2em;
    margin-bottom: 30px;
    font-family: 'Patrick Hand', cursive;
    background: rgba(255, 255, 255, 0.7);
    padding: 15px;
    border-radius: 15px;
    border: 2px dashed #9370db;
    line-height: 1.5;
}

.scratch-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin: 20px 0 40px;
    max-height: none;
    overflow-y: visible;
    padding: 10px;
}

.scratch-card {
    position: relative;
    width: 100%;
    height: 180px;
    border-radius: 15px;
    overflow: hidden;
    cursor: pointer;
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    background: #9370db;
    user-select: none;
    touch-action: none;
}

.scratch-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    cursor: grab;
    touch-action: none;
}

.scratch-canvas:active {
    cursor: grabbing;
}

.scratch-text {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #fff, #f8f8ff);
    font-family: 'Patrick Hand', cursive;
    font-size: 1.2em;
    color: #6a5acd;
    padding: 20px;
    text-align: center;
    border-radius: 15px;
    border: 3px solid #e6e6fa;
    line-height: 1.4;
    font-weight: bold;
}

#p4 .nextBtn {
    margin-top: 20px;
    margin-bottom: 20px;
    position: relative;
    z-index: 100;
}

/* ========== PAGE 5: VALENTINE CARDS - FIXED BACKGROUND ========== */
#p5 {
    background: linear-gradient(135deg, 
        #ff9acb 0%, 
        #ffc3a0 25%, 
        #c9b6ff 50%, 
        #a8dadc 75%, 
        #ffd6e0 100%);
    background-size: 400% 400%;
    animation: bgMove 25s ease infinite;
    position: relative;
    overflow: hidden;
}

#p5 .valentine-card {
    animation: cardAppear 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    padding: 40px 30px;
    border-radius: 25px;
    margin: 10px;
    position: relative;
    font-family: 'Dancing Script', cursive;
    font-size: 2em;
    text-align: center;
    width: 90%;
    max-width: 600px;
    min-height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 15px 40px rgba(0,0,0,0.2);
    border: 5px solid rgba(255,255,255,0.3);
}

@keyframes cardAppear {
    from { transform: scale(0.8) rotate(-5deg); opacity: 0; }
    to { transform: scale(1) rotate(0); opacity: 1; }
}

/* Enhanced color schemes for Valentine cards */
.val-0 { background: linear-gradient(135deg, #ffafcc, #ffc8dd); color: #590d22; }
.val-1 { background: linear-gradient(135deg, #a2d2ff, #bde0fe); color: #003049; }
.val-2 { background: linear-gradient(135deg, #ffd6a5, #ffecd9); color: #8a5a44; }
.val-3 { background: linear-gradient(135deg, #cdb4db, #e0bbe4); color: #3d2b56; }
.val-4 { background: linear-gradient(135deg, #c1f7d5, #e0ffe0); color: #1b4332; }
.val-5 { background: linear-gradient(135deg, #ffccd5, #ffb3c6); color: #800f2f; }
.val-6 { background: linear-gradient(135deg, #b5e8fd, #d4f1f9); color: #005f73; }
.val-7 { background: linear-gradient(135deg, #ffc8dd, #ffafcc); color: #9d4edd; }

/* ========== PAGE 6: PREMIUM DLC WITH LOVE METER - SCROLLABLE ========== */
#p6 {
    justify-content: flex-start;
    padding: 80px 20px 40px;
    overflow-y: auto;
    display: none;
}

#p6.active {
    display: flex;
    opacity: 1;
    transform: translateX(0) scale(1);
}

#p6 .card {
    background: linear-gradient(135deg, #f0f8ff, #f8f8ff);
    font-family: 'Patrick Hand', cursive;
    padding: 50px 40px;
    border-radius: 30px;
    max-width: 85%;
    box-shadow: 0 25px 60px rgba(100, 149, 237, 0.3);
    border: 8px solid #e6e6fa;
    position: relative;
    margin: 20px 0;
    width: 90%;
    max-width: 800px;
}

#p6 h2 {
    font-family: 'Playfair Display', serif;
    font-weight: 800;
    font-size: 3em;
    color: #6495ed;
    margin-bottom: 20px;
}

#p6 p {
    font-size: 1.8em;
    color: #4169e1;
    margin-bottom: 40px;
    font-weight: bold;
}

/* Love Meter Styles */
.love-meter-container {
    background: white;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 15px 35px rgba(255, 105, 180, 0.2);
    border: 3px solid #ff6fae;
    margin: 30px 0;
    width: 100%;
}

.love-meter-title {
    font-size: 1.8em;
    color: #ff3d8b;
    margin-bottom: 20px;
    font-family: 'Playfair Display', serif;
}

.meter {
    width: 100%;
    height: 40px;
    background: #f0f0f0;
    border-radius: 20px;
    overflow: hidden;
    position: relative;
    margin: 15px 0;
}

.meter-fill {
    height: 100%;
    background: linear-gradient(90deg, #ff6fae, #ff3d8b, #ff0066);
    border-radius: 20px;
    width: 0%;
    transition: width 2s ease-in-out;
    position: relative;
    overflow: hidden;
}

.meter-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.4), 
        transparent);
    animation: shine 2s infinite;
}

@keyframes shine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.meter-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
    color: #666;
    font-weight: bold;
}

.meter-value {
    font-size: 2.5em;
    color: #ff0066;
    font-weight: bold;
    margin: 20px 0;
    font-family: 'Dancing Script', cursive;
}

.meter-message {
    font-size: 1.3em;
    color: #4169e1;
    margin-top: 20px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 15px;
    border: 2px solid #6495ed;
}

/* ========== PAGE 7: SCROLLABLE CREATIVE BOTTLE REVEAL ========== */
#p7 {
    background: linear-gradient(135deg, 
        #ff9acb 0%, 
        #ffc3a0 25%, 
        #c9b6ff 50%, 
        #a8dadc 75%, 
        #ffd6e0 100%);
    background-size: 400% 400%;
    animation: bgMove 25s ease infinite;
    position: relative;
    overflow-y: auto;
    display: none;
    justify-content: flex-start;
    padding: 80px 20px 40px;
}

#p7.active {
    display: flex;
    opacity: 1;
    transform: translateX(0) scale(1);
}

/* Ocean Waves Effect - Moved inside page7-content */
.ocean-waves {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 100px;
    overflow: hidden;
    z-index: 1;
    pointer-events: none;
}

.wave {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 200%;
    height: 100%;
    background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 1200 100" xmlns="http://www.w3.org/2000/svg"><path d="M0,50 C150,100 350,0 500,50 C650,100 850,0 1000,50 C1150,100 1350,0 1500,50 L1500,100 L0,100 Z" fill="rgba(173, 216, 230, 0.3)"/></svg>');
    background-size: 50% 100%;
    animation: waveMove 10s linear infinite;
    opacity: 0.5;
}

.wave:nth-child(2) {
    bottom: 10px;
    opacity: 0.3;
    animation-duration: 15s;
    background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 1200 100" xmlns="http://www.w3.org/2000/svg"><path d="M0,30 C200,80 400,20 600,30 C800,80 1000,20 1200,30 L1200,100 L0,100 Z" fill="rgba(135, 206, 250, 0.4)"/></svg>');
}

@keyframes waveMove {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
}

/* Page 7 Content Container */
.page7-content {
    position: relative;
    z-index: 2;
    width: 100%;
    max-width: 800px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 30px;
    padding: 20px 0 80px; /* Added bottom padding for scroll */
    min-height: 100vh; /* Ensure content is scrollable */
}

/* Creative Bottle Container - Fixed position at top */
.bottle-scene {
    position: relative;
    width: 100%;
    max-width: 300px;
    height: 400px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    margin: 40px 0 60px;
    z-index: 10;
}

/* Bottle Animation Container */
.bottle-container {
    position: relative;
    width: 120px;
    height: 200px;
    cursor: pointer;
    transition: all 0.5s ease;
    filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.2));
    z-index: 10;
}

.bottle-body {
    position: relative;
    width: 100%;
    height: 180px;
    background: linear-gradient(135deg, rgba(173, 216, 230, 0.9), rgba(135, 206, 250, 0.8));
    border-radius: 60px 60px 20px 20px;
    overflow: hidden;
    border: 4px solid rgba(255, 255, 255, 0.5);
    box-shadow: inset 0 0 30px rgba(255, 255, 255, 0.4);
}

.bottle-neck {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 40px;
    background: linear-gradient(135deg, rgba(173, 216, 230, 0.9), rgba(135, 206, 250, 0.8));
    border-radius: 15px 15px 5px 5px;
    border: 4px solid rgba(255, 255, 255, 0.5);
    z-index: 2;
}

.bottle-cork {
    position: absolute;
    top: -35px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 20px;
    background: linear-gradient(135deg, #8B4513, #A0522D);
    border-radius: 10px 10px 5px 5px;
    border: 2px solid #654321;
    transition: transform 0.5s ease;
    z-index: 3;
}

.bottle-message {
    position: absolute;
    bottom: -80px;
    color: white;
    font-family: 'Dancing Script', cursive;
    font-size: 1.5em;
    text-align: center;
    background: rgba(0, 0, 0, 0.7);
    padding: 15px 25px;
    border-radius: 20px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    animation: float 3s ease-in-out infinite;
    width: 250px;
    z-index: 1;
    backdrop-filter: blur(5px);
    pointer-events: none;
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

/* Bottle Content - Message Roll */
.message-roll {
    position: absolute;
    top: 30px;
    width: 80%;
    height: 120px;
    background: linear-gradient(135deg, #fffaf0, #fff5ee);
    border-radius: 10px;
    transform: translateY(200px);
    transition: transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    z-index: 1;
}

.message-roll::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 20px;
    background: linear-gradient(135deg, #ff6fae, #ff3d8b);
    border-radius: 10px 10px 0 0;
}

.message-content {
    padding: 20px;
    font-family: 'Dancing Script', cursive;
    color: #6a2c70;
    font-size: 0.9em;
    text-align: center;
    opacity: 0;
    transition: opacity 0.5s ease 0.8s;
}

/* Heart Bubbles */
.bubble {
    position: absolute;
    width: 20px;
    height: 20px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    animation: bubbleRise 8s linear infinite;
    z-index: 1;
}

.bubble:nth-child(odd)::before {
    content: 'üíó';
    position: absolute;
    font-size: 10px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

@keyframes bubbleRise {
    0% {
        transform: translateY(0) scale(0.5);
        opacity: 0;
    }
    10% {
        opacity: 0.7;
    }
    90% {
        opacity: 0.7;
    }
    100% {
        transform: translateY(-300px) scale(1.2);
        opacity: 0;
    }
}

/* Letter Card - Scrollable and positioned below bottle */
#letterCard {
    background: linear-gradient(135deg, #fffaf0, #fff5ee);
    font-family: 'Great Vibes', cursive;
    font-size: 1.6em;
    color: #6a2c70;
    overflow-y: auto;
    max-height: 70vh;
    padding: 50px 40px;
    border-radius: 25px;
    box-shadow: 0 30px 70px rgba(106, 44, 112, 0.3);
    border: 10px double #d8bfd8;
    max-width: 90%;
    opacity: 0;
    transform: translateY(50px) scale(0.95);
    transition: all 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 20;
    position: relative;
    margin: 20px 0 80px;
    width: 100%;
    scrollbar-width: thin;
    scrollbar-color: #ff6fae rgba(255, 255, 255, 0.5);
}

#letterCard::-webkit-scrollbar {
    width: 8px;
}

#letterCard::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.5);
    border-radius: 4px;
}

#letterCard::-webkit-scrollbar-thumb {
    background: #ff6fae;
    border-radius: 4px;
}

#letterCard.show {
    opacity: 1;
    transform: translateY(0) scale(1);
    animation: letterReveal 1.5s ease-out;
}

@keyframes letterReveal {
    0% {
        opacity: 0;
        transform: translateY(100px) scale(0.9);
    }
    50% {
        opacity: 0.8;
        transform: translateY(-10px) scale(1.02);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Sealed Letter Effect */
.sealed-letter {
    position: absolute;
    top: -20px;
    right: -20px;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #ff6fae, #ff3d8b);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2em;
    color: white;
    box-shadow: 0 5px 15px rgba(255, 111, 174, 0.4);
    animation: sealPulse 2s infinite;
}

@keyframes sealPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

/* Closeness Progress Bar */
.closeness-container {
    margin-top: 40px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    border: 3px solid #ff6fae;
    box-shadow: 0 10px 25px rgba(255, 111, 174, 0.2);
}

.closeness-title {
    font-size: 1.5em;
    color: #ff3d8b;
    margin-bottom: 15px;
    font-family: 'Playfair Display', serif;
}

.progress-bar {
    width: 100%;
    height: 30px;
    background: #f0f0f0;
    border-radius: 15px;
    overflow: hidden;
    margin: 20px 0;
    position: relative;
    box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #ff6fae, #ff3d8b, #ff0066);
    border-radius: 15px;
    width: 0%;
    transition: width 2s ease-in-out;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding-right: 10px;
    color: white;
    font-weight: bold;
    position: relative;
    overflow: hidden;
}

.progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.3), 
        transparent);
    animation: shine 2s infinite;
}

.progress-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
    color: #666;
    font-weight: bold;
    font-family: 'Patrick Hand', cursive;
}

.progress-value {
    font-size: 2em;
    color: #ff0066;
    font-weight: bold;
    margin: 10px 0;
    font-family: 'Dancing Script', cursive;
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.progress-message {
    font-size: 1.2em;
    color: #6a2c70;
    margin-top: 15px;
    padding: 15px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 15px;
    border: 2px solid #d8bfd8;
    font-family: 'Patrick Hand', cursive;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

/* ========== COMMON ELEMENTS ========== */
.nextBtn {
    margin-top: 30px;
    background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(240,240,255,0.9));
    color: #6a2c70;
    padding: 15px 35px;
    border-radius: 50px;
    border: 3px solid rgba(155, 93, 229, 0.3);
    font-size: 1.2em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-family: 'Playfair Display', serif;
    box-shadow: 0 8px 25px rgba(106, 44, 112, 0.2);
    z-index: 100;
    position: relative;
}

.nextBtn:hover {
    transform: translateY(-5px);
    background: linear-gradient(135deg, white, #f8f0ff);
    box-shadow: 0 12px 30px rgba(106, 44, 112, 0.4);
}

/* Heart animations */
.heart {
    position: absolute;
    font-size: 2em;
    animation: floatHeart 8s linear infinite;
    z-index: 1;
    pointer-events: none;
    filter: drop-shadow(0 5px 15px rgba(255, 105, 180, 0.5));
}

@keyframes floatHeart {
    0% { 
        transform: translateY(100vh) translateX(0) rotate(0deg); 
        opacity: 1; 
    }
    100% { 
        transform: translateY(-100px) translateX(calc(100vw * var(--random-x))) rotate(720deg); 
        opacity: 0; 
    }
}

/* Loading animation */
.loading-dots {
    display: inline-block;
    font-size: 1.5em;
    animation: dotsPulse 1.5s infinite;
}

@keyframes dotsPulse {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
}

/* NO button escape animation */
@keyframes escape {
    0% { transform: translate(0, 0); }
    25% { transform: translate(50px, -30px); }
    50% { transform: translate(-40px, 40px); }
    75% { transform: translate(60px, 20px); }
    100% { transform: translate(0, 0); }
}

/* ========== COMPREHENSIVE MOBILE OPTIMIZATION ========== */
@media (max-width: 768px) {
    /* General adjustments */
    body {
        overflow-x: hidden;
    }
    
    .page {
        padding: 15px;
    }
    
    #musicControl {
        top: 15px;
        right: 15px;
        width: 50px;
        height: 50px;
        font-size: 1.5em;
    }
    
    /* Page 1 */
    #p1 h1.fancy {
        font-size: 3em;
    }
    
    #p1 h2.fancy {
        font-size: 2em;
        margin: 5px 0 20px 0;
    }
    
    .button-container {
        padding: 20px;
        min-width: 280px;
    }
    
    #yesBtn {
        padding: 15px 30px;
        font-size: 1.3em;
    }
    
    #noMsg {
        padding: 15px;
        font-size: 1em;
        min-width: 200px;
    }
    
    /* Page 2 */
    #p2 {
        padding: 60px 15px 30px;
    }
    
    #p2 .card {
        padding: 25px;
        max-width: 95%;
    }
    
    #p2 h2 {
        font-size: 1.8em;
    }
    
    .achievement-badges {
        flex-direction: column;
        align-items: center;
        gap: 15px;
    }
    
    .badge {
        min-width: 90%;
        padding: 12px;
    }
    
    .badge-icon {
        font-size: 2em;
    }
    
    /* Page 3 */
    img.photo {
        max-width: 90vw;
        max-height: 50vh;
    }
    
    .caption {
        font-size: 1.4em;
        padding: 15px;
        margin: 15px 0;
        min-height: 60px;
    }
    
    /* Page 4 */
    #p4 {
        padding: 60px 15px 30px;
    }
    
    #p4 .card {
        padding: 25px 20px;
        width: 95%;
    }
    
    #p4 h2 {
        font-size: 2em;
    }
    
    .scratch-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .scratch-card {
        height: 150px;
    }
    
    .scratch-instructions {
        font-size: 1em;
        padding: 12px;
    }
    
    .scratch-text {
        font-size: 1em;
        padding: 15px;
    }
    
    /* Page 5 - MOBILE OPTIMIZED */
    #p5 .valentine-card {
        padding: 30px 20px;
        font-size: 1.5em;
        min-height: 180px;
        width: 95%;
    }
    
    /* Page 6 */
    #p6 {
        padding: 60px 15px 30px;
    }
    
    #p6 .card {
        padding: 30px 25px;
        max-width: 95%;
    }
    
    #p6 h2 {
        font-size: 2.2em;
    }
    
    #p6 p {
        font-size: 1.4em;
    }
    
    .love-meter-container {
        padding: 20px 15px;
    }
    
    .love-meter-title {
        font-size: 1.5em;
    }
    
    .meter {
        height: 30px;
    }
    
    .meter-value {
        font-size: 2em;
    }
    
    .meter-message {
        font-size: 1.1em;
        padding: 12px;
    }
    
    /* Page 7 - MOBILE OPTIMIZED */
    #p7 {
        padding: 60px 15px 30px;
    }
    
    .page7-content {
        gap: 20px;
        padding: 10px 0 60px;
    }
    
    .bottle-scene {
        max-width: 250px;
        height: 350px;
        margin: 20px 0 40px;
    }
    
    .bottle-container {
        width: 100px;
        height: 160px;
    }
    
    .bottle-body {
        height: 140px;
        border-radius: 50px 50px 15px 15px;
    }
    
    .bottle-neck {
        width: 25px;
        height: 30px;
        top: -15px;
    }
    
    .bottle-cork {
        width: 35px;
        height: 15px;
        top: -25px;
    }
    
    .message-roll {
        height: 100px;
        top: 25px;
    }
    
    .message-content {
        padding: 15px;
        font-size: 0.8em;
    }
    
    .bottle-message {
        font-size: 1.2em;
        padding: 12px 20px;
        width: 200px;
        bottom: -60px;
    }
    
    /* Letter Card Mobile Adjustments */
    #letterCard {
        padding: 30px 25px;
        font-size: 1.3em;
        max-width: 95%;
        margin: 10px 0 60px;
        max-height: 60vh;
    }
    
    #letterCard.show {
        animation: letterRevealMobile 1.2s ease-out;
    }
    
    @keyframes letterRevealMobile {
        0% {
            opacity: 0;
            transform: translateY(50px) scale(0.9);
        }
        100% {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }
    
    .sealed-letter {
        width: 50px;
        height: 50px;
        font-size: 1.5em;
        top: -15px;
        right: -15px;
    }
    
    .closeness-container {
        padding: 15px;
        margin-top: 30px;
    }
    
    .closeness-title {
        font-size: 1.3em;
    }
    
    .progress-bar {
        height: 25px;
    }
    
    .progress-value {
        font-size: 1.8em;
    }
    
    .progress-message {
        font-size: 1em;
        padding: 12px;
    }
    
    .ocean-waves {
        height: 70px;
    }
    
    /* Bubble adjustments */
    .bubble {
        width: 15px;
        height: 15px;
    }
    
    .bubble:nth-child(odd)::before {
        font-size: 8px;
    }
    
    /* Common Elements */
    .nextBtn {
        padding: 12px 30px;
        font-size: 1.1em;
        margin-top: 20px;
        margin-bottom: 10px;
    }
    
    .heart {
        font-size: 1.5em;
    }
}

/* Extra small devices */
@media (max-width: 480px) {
    #p1 h1.fancy {
        font-size: 2.5em;
    }
    
    #p1 h2.fancy {
        font-size: 1.6em;
    }
    
    .button-container {
        min-width: 90%;
        padding: 15px;
    }
    
    #yesBtn {
        padding: 12px 25px;
        font-size: 1.2em;
    }
    
    #noBtn {
        padding: 10px 20px;
        font-size: 1em;
    }
    
    .scratch-card {
        height: 130px;
    }
    
    .scratch-text {
        font-size: 0.9em;
        padding: 12px;
    }
    
    #p5 .valentine-card {
        font-size: 1.3em;
        min-height: 160px;
        padding: 25px 15px;
    }
    
    #p6 h2 {
        font-size: 1.8em;
    }
    
    #p6 p {
        font-size: 1.2em;
    }
    
    /* Page 7 - Extra small devices */
    #p7 {
        padding: 50px 10px 20px;
    }
    
    .bottle-scene {
        max-width: 200px;
        height: 300px;
    }
    
    .bottle-container {
        width: 80px;
        height: 130px;
    }
    
    .bottle-body {
        height: 110px;
        border-radius: 40px 40px 15px 15px;
    }
    
    .bottle-neck {
        width: 20px;
        height: 25px;
        top: -12px;
    }
    
    .bottle-cork {
        width: 30px;
        height: 12px;
        top: -20px;
    }
    
    .message-roll {
        height: 80px;
        top: 20px;
    }
    
    .message-content {
        padding: 10px;
        font-size: 0.7em;
    }
    
    .bottle-message {
        font-size: 1em;
        width: 180px;
        bottom: -50px;
        padding: 10px 15px;
    }
    
    #letterCard {
        padding: 25px 20px;
        font-size: 1.1em;
        max-height: 50vh;
    }
    
    .sealed-letter {
        width: 40px;
        height: 40px;
        font-size: 1.2em;
        top: -10px;
        right: -10px;
    }
    
    .closeness-container {
        padding: 12px;
    }
    
    .closeness-title {
        font-size: 1.1em;
    }
    
    .progress-bar {
        height: 20px;
    }
    
    .progress-value {
        font-size: 1.5em;
    }
    
    .progress-message {
        font-size: 0.9em;
        padding: 10px;
    }
    
    .ocean-waves {
        height: 50px;
    }
}

/* Prevent text selection on interactive elements */
#noBtn, .scratch-card, .valentine-card, .bottle-container {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    user-select: none;
}

/* Improve touch targets */
button, .scratch-card, .bottle-container {
    min-height: 44px;
}

/* Smooth scrolling for mobile */
.page {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
}

/* Prevent pull-to-refresh on mobile */
body {
    overscroll-behavior-y: contain;
}

/* Optimize animations for mobile */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
</style>
</head>
<body>
<!-- Music Control Button -->
<button id="musicControl">üéµ</button>

<audio id="bgm" preload="auto">
  <source src="songs/music.mp3" type="audio/mpeg">
  <source src="songs/music.ogg" type="audio/ogg">
  Your browser does not support the audio element.
</audio>

<!-- Page 1 -->
<div class="page active" id="p1">
  <h1 class="fancy">Joshita üíó</h1>
  <h2 class="fancy">Will you be my Valentine?</h2>
  
  <div class="button-container">
    <button class="btn" id="yesBtn">üíñ YES, IT'S YOU üíñ</button>
    <div style="position: relative; height: 60px; width: 200px;">
      <button class="btn" id="noBtn">No.</button>
    </div>
  </div>
  
  <div id="noMsg">Try clicking "No"... I dare you üòâ</div>
</div>

<!-- Page 2: Scrollable with Achievement Badges -->
<div class="page" id="p2">
  <div class="card fadeIn">
    <h2>Our Journey Together ‚ú®</h2>
    <p>Two NEET droppers. Same road. Same pressure. Not much time, not many meetings‚Ä¶ but we still try to support each other. That Saraswati Pujo walk? Short, simple, unforgettable üå∏</p>
    
    <div class="achievement-badges">
      <div class="badge">
        <div class="badge-icon">üí¨</div>
        <div class="badge-title">First Conversation</div>
        <div class="badge-date">7th October, 2025</div>
      </div>
      <div class="badge">
        <div class="badge-icon">üéÆ</div>
        <div class="badge-title">Roblox Adventure</div>
        <div class="badge-date">Played Together</div>
      </div>
      <div class="badge">
        <div class="badge-icon">üíï</div>
        <div class="badge-title">Confession Day</div>
        <div class="badge-date">25th January, 2026</div>
      </div>
      <div class="badge">
        <div class="badge-icon">üåπ</div>
        <div class="badge-title">First Date</div>
        <div class="badge-date">1st February, 2026</div>
      </div>
    </div>
    
    <button class="btn nextBtn">Walk with me ‚Üí</button>
  </div>
</div>

<!-- Page 3 -->
<div class="page" id="p3">
  <img id="photo" class="photo" src="photo1.jpeg">
  <div id="caption" class="caption"></div>
  <button class="btn nextBtn" style="display:none">More memories ‚Üí</button>
</div>

<!-- Page 4: Fixed Scrollable Scratch Cards -->
<div class="page" id="p4">
  <div class="card fadeIn">
    <h2>Little reasons you're special ‚ú®</h2>
    <div class="scratch-instructions">‚ú® Scratch each card to reveal why you're amazing!<br>Use your finger or mouse to scratch off the purple layer ‚ú®</div>
    
    <div class="scratch-grid">
      <div class="scratch-card" id="scratch1">
        <div class="scratch-text">üòä Your smile lights up every room</div>
        <canvas class="scratch-canvas"></canvas>
      </div>
      <div class="scratch-card" id="scratch2">
        <div class="scratch-text">üìö Your fierce determination inspires me</div>
        <canvas class="scratch-canvas"></canvas>
      </div>
      <div class="scratch-card" id="scratch3">
        <div class="scratch-text">ü§ç Your genuine kindness touches hearts</div>
        <canvas class="scratch-canvas"></canvas>
      </div>
      <div class="scratch-card" id="scratch4">
        <div class="scratch-text">üé∂ Your contagious laugh is my favorite sound</div>
        <canvas class="scratch-canvas"></canvas>
      </div>
      <div class="scratch-card" id="scratch5">
        <div class="scratch-text">üå∑ Your beautiful honesty builds trust</div>
        <canvas class="scratch-canvas"></canvas>
      </div>
      <div class="scratch-card" id="scratch6">
        <div class="scratch-text">üí´ Your magical presence makes everything better</div>
        <canvas class="scratch-canvas"></canvas>
      </div>
    </div>
    
    <button class="btn nextBtn">Keep going üíû</button>
  </div>
</div>

<!-- Page 5: Valentine Cards -->
<div class="page" id="p5">
  <div id="valCard"></div>
  <button class="btn nextBtn" style="display:none">Almost there ‚Üí</button>
</div>

<!-- Page 6: Scrollable Love Meter -->
<div class="page" id="p6">
  <div class="card fadeIn">
    <h2>Congratulations! üéâ</h2>
    <p>You unlocked <span style="color:#ff6fae">Premium Boyfriend DLC</span>!</p>
    <p style="font-size:1.3em;color:#4169e1">Includes: ‚àû Love, Endless Support,<br>Lifetime Updates & Daily Smiles üòÑ</p>
    
    <div class="love-meter-container">
      <div class="love-meter-title">Our Love Meter üíñ</div>
      <div class="meter">
        <div class="meter-fill" id="loveMeterFill"></div>
      </div>
      <div class="meter-labels">
        <span>Just Started</span>
        <span>Forever</span>
      </div>
      <div class="meter-value" id="loveMeterValue">0%</div>
      <div class="meter-message" id="loveMeterMessage">Measuring our love... üíï</div>
    </div>
    
    <button class="btn nextBtn">Final Surprise üéÅ</button>
  </div>
</div>

<!-- Page 7: Scrollable Creative Bottle Reveal -->
<div class="page" id="p7">
  <div class="ocean-waves">
    <div class="wave"></div>
    <div class="wave"></div>
  </div>
  
  <div class="page7-content">
    <!-- Bubble animations -->
    <div class="bubble" style="left: 20%; animation-delay: 0s;"></div>
    <div class="bubble" style="left: 40%; animation-delay: 1s;"></div>
    <div class="bubble" style="left: 60%; animation-delay: 2s;"></div>
    <div class="bubble" style="left: 80%; animation-delay: 3s;"></div>
    <div class="bubble" style="left: 30%; animation-delay: 4s;"></div>
    <div class="bubble" style="left: 70%; animation-delay: 5s;"></div>
    
    <div class="bottle-scene">
      <div class="bottle-container" id="bottleContainer">
        <div class="bottle-cork" id="bottleCork"></div>
        <div class="bottle-neck"></div>
        <div class="bottle-body">
          <div class="message-roll" id="messageRoll">
            <div class="message-content">My love, this message is just for you...</div>
          </div>
        </div>
      </div>
      
      <div class="bottle-message">Tap the bottle to uncork the message üíå</div>
    </div>
    
    <div class="card" id="letterCard">
      <div class="sealed-letter">‚úâÔ∏è</div>
      <p>My love, your face feels like a quiet sunrise‚Ä¶ soft light, wild dark waves, and eyes that carry ocean secrets. Your smile warms everything around it. You're bold in your laugh, gentle in your kindness, and sharp in your wit. Your spirit feels free yet grounding, and somehow every moment with you feels like home.
      <br><br>I love you more than words can hold. Deep as the sea, wild as your waves, forever my sunrise, my spark, my everything.
      <br><br>This is the last page‚Ä¶ but us? still loading <span class="loading-dots">...</span>‚è≥üíó
      <br><br><b>From Sudeep</b><br><br>PS: You officially can't press No anymore üòå</p>
      
      <div class="closeness-container">
        <div class="closeness-title">How close you are to my heart ‚ù§Ô∏è</div>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-labels">
          <span>Just Met</span>
          <span>Soulmates</span>
        </div>
        <div class="progress-value" id="progressValue">0%</div>
        <div class="progress-message" id="progressMessage">Our connection is growing every day... üå±</div>
      </div>
    </div>
  </div>
</div>

<script>
// ========== INITIALIZE VARIABLES ==========
const pages = [...document.querySelectorAll('.page')];
let current = 0;
let isMusicPlaying = false;

// ========== MUSIC FUNCTIONS ==========
const bgm = document.getElementById('bgm');
const musicControl = document.getElementById('musicControl');

function startMusic() {
    bgm.volume = 0.7;
    const playPromise = bgm.play();
    
    if (playPromise !== undefined) {
        playPromise.then(() => {
            isMusicPlaying = true;
            musicControl.textContent = "üé∂";
            musicControl.classList.add('playing');
        }).catch(error => {
            console.log("Audio play failed:", error);
            musicControl.title = "Click to enable audio";
        });
    }
}

function toggleMusic() {
    if (isMusicPlaying) {
        bgm.pause();
        musicControl.textContent = "üéµ";
        musicControl.classList.remove('playing');
        isMusicPlaying = false;
    } else {
        startMusic();
    }
}

musicControl.addEventListener('click', toggleMusic);

// ========== PAGE NAVIGATION ==========
function showPage(i) {
    if (i >= 0 && i < pages.length) {
        pages[current].classList.remove('active');
        pages[current].classList.add('exit');
        
        setTimeout(() => {
            pages[current].classList.remove('exit');
            pages[i].classList.add('active');
            current = i;
            
            // Scroll to top of page
            if (i === 1 || i === 3 || i === 5 || i === 6) {
                setTimeout(() => {
                    pages[i].scrollTop = 0;
                }, 100);
            }
            
            // Initialize features when page loads
            if (i === 3) { // Page 4
                setTimeout(initScratchCards, 300);
            } else if (i === 4) { // Page 5
                v = 0;
                runVal();
            } else if (i === 5) { // Page 6
                setTimeout(initLoveMeter, 300);
            } else if (i === 6) { // Page 7
                setTimeout(initBottleAndProgress, 300);
            }
        }, 300);
    }
}

// ========== NO BUTTON BEHAVIOR ==========
const noBtn = document.getElementById('noBtn');
const noMsg = document.getElementById('noMsg');
const noMsgs = [
    "Nice try! üòÑ",
    "No is on vacation! üèñÔ∏è",
    "System says YES only! üíª",
    "Future you already said Yes! üîÆ",
    "Access denied! üö´",
    "Don't be shy! üôà",
    "Click YES for surprises! üéÅ",
    "I know you want to say Yes! üòâ",
    "The YES button is lonely! ü•∫",
    "Trust me, click YES! ü§û"
];

let noClickCount = 0;

function moveNoButton() {
    const container = noBtn.parentElement;
    const containerRect = container.getBoundingClientRect();
    
    // Get random position within container
    const maxX = containerRect.width - noBtn.offsetWidth - 10;
    const maxY = containerRect.height - noBtn.offsetHeight - 10;
    
    const randomX = Math.random() * maxX;
    const randomY = Math.random() * maxY;
    
    // Apply position with escape animation
    noBtn.style.position = 'absolute';
    noBtn.style.left = `${randomX}px`;
    noBtn.style.top = `${randomY}px`;
    noBtn.style.transform = `rotate(${Math.random() * 20 - 10}deg)`;
    
    // Show random message
    noMsg.textContent = noMsgs[Math.floor(Math.random() * noMsgs.length)];
    
    // Add shaking effect
    noBtn.style.animation = 'escape 0.3s ease';
    setTimeout(() => {
        noBtn.style.animation = '';
    }, 300);
    
    noClickCount++;
    
    // After 3 attempts, make YES button more prominent
    if (noClickCount >= 3) {
        const yesBtn = document.getElementById('yesBtn');
        yesBtn.style.animation = 'yesButtonGlow 0.5s ease-in-out infinite';
        yesBtn.style.transform = 'scale(1.1)';
    }
}

noBtn.addEventListener('mouseenter', moveNoButton);
noBtn.addEventListener('touchstart', (e) => {
    e.preventDefault();
    moveNoButton();
});
noBtn.addEventListener('click', (e) => {
    e.preventDefault();
    moveNoButton();
});

// ========== YES BUTTON ==========
document.getElementById('yesBtn').addEventListener('click', () => {
    // Start music
    startMusic();
    
    // Reset NO button position
    noBtn.style.position = 'static';
    noBtn.style.left = 'auto';
    noBtn.style.top = 'auto';
    noBtn.style.transform = 'none';
    
    // Spawn hearts
    spawnHearts();
    
    // Show page 2
    showPage(1);
});

// ========== NEXT BUTTONS ==========
document.querySelectorAll('.nextBtn').forEach(btn => {
    btn.addEventListener('click', () => {
        showPage(current + 1);
    });
});

// ========== PHOTO GALLERY ==========
const photos = [
    {src:'photo1.jpeg', text:'Cool drinks, warm looks, just us two‚Ä¶ in your eyes, my world feels new üíó'},
    {src:'photo2.jpeg', text:'Your blue framed eyes sparkle like hidden sapphires ‚ú®'},
    {src:'photo3.jpeg', text:'Quiet smiles, loud memories üíû'},
    {src:'photo4.jpeg', text:'Four moments, one feeling‚Ä¶ you ü§ç'}
];

let pIndex = 0;
const img = document.getElementById('photo');
const cap = document.getElementById('caption');

function typeText(el, text, cb) {
    let i = 0;
    el.innerHTML = '';
    const t = setInterval(() => {
        el.innerHTML += text[i++];
        if (i >= text.length) {
            clearInterval(t);
            cb && cb();
        }
    }, 40);
}

function runPhotos() {
    if (pIndex >= photos.length) {
        document.querySelector('#p3 .nextBtn').style.display = 'block';
        return;
    }
    img.src = photos[pIndex].src;
    typeText(cap, photos[pIndex].text, () => {
        setTimeout(() => {
            pIndex++;
            runPhotos();
        }, 1200);
    });
}

// ========== VALENTINE CARDS ==========
const vals = [
    {text:"üåπ Rose Day: You already brighten my days", class:"val-0"},
    {text:"üíå Propose: Still choosing you", class:"val-1"},
    {text:"üç´ Chocolate: Sweet moments", class:"val-2"},
    {text:"üß∏ Teddy: Comfort vibes", class:"val-3"},
    {text:"ü§ù Promise: I've got your back", class:"val-4"},
    {text:"ü§ó Hug: Safe place", class:"val-5"},
    {text:"üíã Kiss: Tiny magic", class:"val-6"},
    {text:"üíñ Valentine: It's you", class:"val-7"}
];

let v = 0;
const vc = document.getElementById('valCard');

function runVal() {
    if (v >= vals.length) {
        document.querySelector('#p5 .nextBtn').style.display = 'block';
        return;
    }
    vc.innerHTML = `<div class="valentine-card ${vals[v].class}"></div>`;
    const cardDiv = vc.querySelector('.valentine-card');
    typeText(cardDiv, vals[v].text, () => {
        setTimeout(() => {
            v++;
            runVal();
        }, 1200);
    });
}

// ========== FIXED SCRATCH CARDS FUNCTIONALITY ==========
function initScratchCards() {
    const scratchCards = document.querySelectorAll('.scratch-card');
    
    scratchCards.forEach((card) => {
        const canvas = card.querySelector('.scratch-canvas');
        const ctx = canvas.getContext('2d');
        
        // Initialize canvas
        function initCanvas() {
            const rect = card.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;
            
            // Draw scratch layer
            ctx.fillStyle = '#9370db';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.globalCompositeOperation = 'destination-out';
        }
        
        initCanvas();
        
        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;
        
        // Function to get canvas position
        function getCanvasPosition(e) {
            const rect = canvas.getBoundingClientRect();
            let x, y;
            
            if (e.type.includes('touch')) {
                x = e.touches[0].clientX - rect.left;
                y = e.touches[0].clientY - rect.top;
            } else {
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            }
            
            return {
                x: x * (canvas.width / rect.width),
                y: y * (canvas.height / rect.height)
            };
        }
        
        // Event Listeners
        function startDrawing(e) {
            isDrawing = true;
            const pos = getCanvasPosition(e);
            lastX = pos.x;
            lastY = pos.y;
            draw(e);
        }
        
        function draw(e) {
            if (!isDrawing) return;
            
            const pos = getCanvasPosition(e);
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(pos.x, pos.y);
            ctx.strokeStyle = 'rgba(0,0,0,1)';
            ctx.lineWidth = 40;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.stroke();
            
            lastX = pos.x;
            lastY = pos.y;
            
            // Check if enough is scratched
            checkScratchCompletion(canvas, card);
            e.preventDefault();
        }
        
        function stopDrawing() {
            isDrawing = false;
        }
        
        // Mouse events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseleave', stopDrawing);
        
        // Touch events
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            startDrawing(e);
        });
        
        canvas.addEventListener('touchmove', (e) => {
            if (isDrawing) {
                e.preventDefault();
                draw(e);
            }
        });
        
        canvas.addEventListener('touchend', stopDrawing);
        
        // Check completion function
        function checkScratchCompletion(canvas, card) {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const pixels = imageData.data;
            let transparentCount = 0;
            
            // Count transparent pixels (alpha = 0)
            for (let i = 3; i < pixels.length; i += 4) {
                if (pixels[i] === 0) {
                    transparentCount++;
                }
            }
            
            const totalPixels = canvas.width * canvas.height;
            const percentage = (transparentCount / totalPixels) * 100;
            
            // If 40% is scratched, reveal completely with animation
            if (percentage > 40 && canvas.style.opacity !== '0') {
                canvas.style.transition = 'opacity 0.5s ease';
                canvas.style.opacity = '0';
                
                // Add sparkle effect
                card.style.boxShadow = '0 0 30px rgba(255, 255, 255, 0.8)';
                setTimeout(() => {
                    card.style.boxShadow = '0 10px 25px rgba(0,0,0,0.15)';
                }, 500);
            }
        }
        
        // Add resize listener
        window.addEventListener('resize', initCanvas);
    });
}

// ========== LOVE METER FUNCTIONALITY ==========
function initLoveMeter() {
    const meterFill = document.getElementById('loveMeterFill');
    const meterValue = document.getElementById('loveMeterValue');
    const meterMessage = document.getElementById('loveMeterMessage');
    
    // Animate love meter to 100%
    let percentage = 0;
    const messages = [
        "Just met... üíù",
        "Getting warmer... üî•",
        "You're amazing! ‚ú®",
        "My heart is yours! üíó",
        "Soulmate level! üíû",
        "Forever and always! ‚ôæÔ∏è"
    ];
    
    const interval = setInterval(() => {
        percentage += 2;
        if (percentage > 100) {
            percentage = 100;
            clearInterval(interval);
            meterMessage.textContent = "Our love is infinite! üíñ";
        }
        
        meterFill.style.width = percentage + '%';
        meterValue.textContent = percentage + '%';
        
        // Update message based on percentage
        if (percentage >= 20 && percentage < 40) {
            meterMessage.textContent = messages[1];
        } else if (percentage >= 40 && percentage < 60) {
            meterMessage.textContent = messages[2];
        } else if (percentage >= 60 && percentage < 80) {
            meterMessage.textContent = messages[3];
        } else if (percentage >= 80 && percentage < 100) {
            meterMessage.textContent = messages[4];
        }
    }, 30);
}

// ========== CREATIVE BOTTLE ANIMATION ==========
function initBottleAndProgress() {
    const bottleContainer = document.getElementById('bottleContainer');
    const bottleCork = document.getElementById('bottleCork');
    const messageRoll = document.getElementById('messageRoll');
    const letterCard = document.getElementById('letterCard');
    const progressFill = document.getElementById('progressFill');
    const progressValue = document.getElementById('progressValue');
    const progressMessage = document.getElementById('progressMessage');
    
    console.log("Creative bottle animation initialized");
    
    // Reset everything first
    bottleContainer.style.opacity = '1';
    bottleContainer.style.transform = 'scale(1)';
    bottleContainer.style.pointerEvents = 'auto';
    bottleContainer.style.position = 'relative';
    
    bottleCork.style.transform = 'translateX(-50%)';
    messageRoll.style.transform = 'translateY(200px)';
    messageRoll.querySelector('.message-content').style.opacity = '0';
    
    letterCard.style.display = 'none';
    letterCard.classList.remove('show');
    
    // Bottle click handler
    function handleBottleClick() {
        console.log("Bottle clicked! Uncorking the message...");
        
        // Prevent multiple clicks
        bottleContainer.style.pointerEvents = 'none';
        
        // Animate cork popping
        bottleCork.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
        bottleCork.style.transform = 'translateX(-50%) translateY(-50px) rotate(180deg)';
        
        // Add popping sound effect
        setTimeout(() => {
            // Animate message roll coming out
            messageRoll.style.transition = 'transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1)';
            messageRoll.style.transform = 'translateY(0)';
            
            // Show message content
            setTimeout(() => {
                messageRoll.querySelector('.message-content').style.opacity = '1';
                
                // Shake bottle for effect
                bottleContainer.style.animation = 'shake 0.5s ease';
                
                setTimeout(() => {
                    bottleContainer.style.animation = '';
                    
                    // Transform message roll into full letter
                    setTimeout(() => {
                        // Hide message roll with fade out
                        messageRoll.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                        messageRoll.style.opacity = '0';
                        messageRoll.style.transform = 'scale(0.8) translateY(20px)';
                        
                        // Show full letter card
                        setTimeout(() => {
                            letterCard.style.display = 'block';
                            letterCard.style.overflowY = 'auto';
                            
                            // Force reflow for animation
                            letterCard.offsetHeight;
                            
                            letterCard.classList.add('show');
                            
                            // Start progress bar animation after letter is fully visible
                            setTimeout(() => {
                                animateProgressBar();
                                
                                // Scroll to letter smoothly
                                setTimeout(() => {
                                    letterCard.scrollIntoView({ 
                                        behavior: 'smooth', 
                                        block: 'center' 
                                    });
                                }, 500);
                            }, 800);
                        }, 500);
                    }, 800);
                }, 500);
            }, 800);
        }, 300);
    }
    
    // Add shake animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes shake {
            0%, 100% { transform: translateX(0) rotate(0); }
            25% { transform: translateX(-5px) rotate(-2deg); }
            75% { transform: translateX(5px) rotate(2deg); }
        }
    `;
    document.head.appendChild(style);
    
    // Add event listeners
    bottleContainer.addEventListener('click', handleBottleClick);
    bottleContainer.addEventListener('touchend', function(e) {
        e.preventDefault();
        handleBottleClick();
    });
    
    function animateProgressBar() {
        let percentage = 0;
        const messages = [
            "Just getting started... üå±",
            "Getting closer every day... üíù",
            "You're in my thoughts... üí≠",
            "My heart skips a beat... üíì",
            "Can't imagine life without you... üåü",
            "Soul connected forever... üíû"
        ];
        
        const interval = setInterval(() => {
            percentage += 1.2;
            if (percentage > 98) {
                percentage = 98;
                clearInterval(interval);
                progressMessage.textContent = "Almost there... just a little space for more growth! üåπ";
                
                // Spawn hearts at the end
                setTimeout(() => {
                    spawnHearts();
                    
                    // Auto-scroll to show progress bar
                    setTimeout(() => {
                        progressFill.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                    }, 300);
                }, 500);
            }
            
            progressFill.style.width = percentage + '%';
            progressValue.textContent = Math.round(percentage) + '%';
            
            // Update message based on percentage
            if (percentage >= 20 && percentage < 40) {
                progressMessage.textContent = messages[1];
            } else if (percentage >= 40 && percentage < 60) {
                progressMessage.textContent = messages[2];
            } else if (percentage >= 60 && percentage < 80) {
                progressMessage.textContent = messages[3];
            } else if (percentage >= 80) {
                progressMessage.textContent = messages[4];
            }
        }, 40);
    }
}

// ========== PAGE CHANGE WATCHER ==========
let last = 0;
setInterval(() => {
    if (current !== last) { 
        if (current === 2) runPhotos(); 
        last = current;
        if (current !== 2) pIndex = 0;
    }
}, 300);

// ========== HEART ANIMATION ==========
function spawnHearts() {
    for (let i = 0; i < 30; i++) {
        setTimeout(() => {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = 'üíó';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.setProperty('--random-x', Math.random() * 2 - 1);
            document.body.appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
            }, 8000);
        }, i * 100);
    }
}

// ========== SWIPE NAVIGATION ==========
let startX = 0;
document.addEventListener('touchstart', e => {
    startX = e.touches[0].clientX;
});
document.addEventListener('touchend', e => {
    const endX = e.changedTouches[0].clientX;
    const diff = endX - startX;
    
    if (diff < -50 && current < pages.length - 1) {
        showPage(current + 1);
    } else if (diff > 50 && current > 0) {
        showPage(current - 1);
    }
});

// ========== KEYBOARD NAVIGATION ==========
document.addEventListener('keydown', e => {
    if (e.key === 'ArrowRight' && current < pages.length - 1) {
        showPage(current + 1);
    } else if (e.key === 'ArrowLeft' && current > 0) {
        showPage(current - 1);
    }
});

// ========== MOBILE TOUCH OPTIMIZATIONS ==========
// Prevent default touch actions on interactive elements
document.querySelectorAll('button, .scratch-card, .bottle-container').forEach(el => {
    el.addEventListener('touchstart', (e) => {
        e.stopPropagation();
    });
});

// Handle orientation changes
window.addEventListener('orientationchange', function() {
    setTimeout(() => {
        window.scrollTo(0, 0);
    }, 100);
});

// ========== INITIALIZE ==========
document.addEventListener('DOMContentLoaded', () => {
    // Preload audio
    bgm.load();
    bgm.volume = 0;
    
    // Add click sound effect to all buttons
    const buttons = document.querySelectorAll('button');
    buttons.forEach(btn => {
        btn.addEventListener('click', () => {
            btn.style.transform = 'scale(0.95)';
            setTimeout(() => {
                btn.style.transform = '';
            }, 150);
        });
        
        // Add touch feedback
        btn.addEventListener('touchstart', () => {
            btn.style.transform = 'scale(0.95)';
        });
        
        btn.addEventListener('touchend', () => {
            setTimeout(() => {
                btn.style.transform = '';
            }, 150);
        });
    });
    
    // Initial NO button message
    noMsg.textContent = "Try clicking 'No'... I dare you üòâ";
    
    console.log("Website loaded successfully!");
    
    // Add a helpful message for mobile users
    if ('ontouchstart' in window) {
        console.log("Mobile device detected - touch optimized");
    }
});
</script>
</body>
</html>
